<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Телепортация MODX. Решаем проблемы деплоя</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=792, user-scalable=no">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<link rel="stylesheet" href="node_modules/shower-bright/styles/screen.css">
</head>
<body class="list">
	<header class="caption">
		<h1>Телепортация MODX. Решаем проблемы деплоя</h1>
		<p>Иван Климчук, <a href="http://alroniks.com">Alroniks Experts</a>.</p>
	</header>
	<section class="slide cover h" id="Cover">
		<div>
			<p><a href="http://klimchuk.cby">Иван Климчук</a></p>
			<div class="header">
				<h2>Телепортация MODX</h2>
				<h3>Решаем проблемы деплоя</h3>	
			</div>
			
			<img src="pictures/portal.jpg" alt="">
			<style>
				#Cover .header {
					position: relative;
					left: -60px;
					margin-top: 300px;
				}
				#Cover h2 {
					margin:30px 0 0;
					color:#fff;
					font-size:65px;
					}
				#Cover h3 {
					margin:10px 0 0;
					color:#fff;
					font-size: 30px;
				}
				#Cover p {
					position: relative;
					top: -60px;
					left: -60px;
					margin:10px 0 0;
					text-align:left;
					color:#FFF;
					font-style:italic;
					font-size:20px;
					}
					#Cover p a {
						color:#FFF;
						}
			</style>
		</div>
	</section>
	<section class="slide logo" id="about">
		<div>
			<h2>Ты кто такой?</h2>
			<ul>
				<li>MODX Ambassador</li>
				<li>MODX Professinal</li>
				<li>Опыт работы с MODX &mdash; 4 года</li>
				<li>Люблю MODX</li>
			</ul>
			<a href="http://alroniks.com"><img src="pictures/alroniks-experts.svg" alt="Alroniks Experts" class="logo place r t"></a>
			<style>
	    	.slide .logo {
	    		width: 200px;
	    		margin: 30px 40px 30px;
	    	}
			</style>
		</div>
	</section>
	<section class="slide cover h shout">
		<div>
			<h2>Разработка</h2>
			<img src="pictures/computer.jpg" alt="">
			<style>
				.shout h2 {
					text-align: center;
				}
			</style>
		</div>		
	</section>
	<section class="slide">
		<div>
			<h2>Этапы разработки</h2>
			<ul>
				<li class="next">Установка MODX</li>
				<li class="next">Настройка (ЧПУ, имя сайта, почта и тд.)</li>
				<li class="next">Установка дополнений</li>
				<li class="next">Заполнение дерева (структура)</li>
				<li class="next">Наполнение шаблонов и чанков</li>
				<li class="next"><mark class="important">Творческий процесс разработчика</mark></li>
			</ul>
			<a href="http://alroniks.com"><img src="pictures/alroniks-experts.svg" alt="Alroniks Experts" class="logo place r t"></a>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Известные недостатки MODX</h2>
			<ul>
				<li>Элементы в БД</li>
				<li>Необходимость работы через админпанель</li>
				<li>Git? Бесполезен</li>
			</ul>
			<a href="http://alroniks.com"><img src="pictures/alroniks-experts.svg" alt="Alroniks Experts" class="logo place r t"></a>
		</div>
	</section>
	<section class="slide shout">
		<div>
			<h2>Тестирование</h2>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Перенос сайта</h2>
			<ul>
				<li>FTP</li>
				<li>SSH (SFTP)</li>
				<li>scp / rsync / ...</li>
				<li>PhpMyAdmin / mysqldump</li>
				<li>Vapor
					<ul>
						<li class="next"><mark>только для MODX Revo 2.2+</mark></li>
						<li class="next"><mark>только MODX Cloud</mark></li>
					</ul>
				</li>
			</ul>
			<a href="http://alroniks.com"><img src="pictures/alroniks-experts.svg" alt="Alroniks Experts" class="logo place r t"></a>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>OK. Перенесли</h2>
			<p>И тут заказчик решает добавить на сайт новый раздел</p>
			<figure>
	    		<blockquote>
	        		<p>&mdash; Я все оплачу, делайте!</p>
	    		</blockquote>
	    		<figcaption>Заказчик</figcaption>
			</figure>
		</div>
		<a href="http://alroniks.com"><img src="pictures/alroniks-experts.svg" alt="Alroniks Experts" class="logo place r t"></a>
	</section>
	<section class="slide shout" id="idunnolol">
		<div>
			<h2><strong>¯\_(ツ)_/¯</strong></h2>
		</div>
		<style>
			#idunnolol h2 {
				font-size: 180px;
				font-weight: bold;
			}
		</style>
	</section>
	<section class="slide">
		<div>
			<h2>Неужели нет решения?</h2>
			<ul>
				<li>SE Manager + StaticSaver + git</li>
				<li>ElementHelper + git</li>
				<li>Gitify</li>
				<li>Cast</li>
				<li>Общие недостатки</li>
			</ul>
			<a href="http://alroniks.com"><img src="pictures/alroniks-experts.svg" alt="Alroniks Experts" class="logo place r t"></a>
		</div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>

	<section class="slide cover shout h" id="teleport">
		<div>
			<h2>Teleport</h2>
			<img src="pictures/pgun.jpg" alt="">
			<style>
			#teleport h2 {
				margin-left: 400px;
				margin-top: 200px;
				color: #52A2DF;
			}
			</style>
		</div>
	</section>
	<section class="slide" id="teleport2">
		<div>
			<h2>Teleport</h2>
			<p>Teleport - это расширяемый набор скриптов для работы с одним или несколькими локальными экземлярами MODX Revolution.</p>
			<a href="https://github.com/modxcms/teleport">github.com/modxcms/teleport</a>
			<br>
			Автор: <a href="http://jasoncoward.com">Jason Coward</a>
			<br>
			<h3>MODX Cloud</h3>
		</div>
		<style>
		#teleport2 h3 {
			font-size: 40px;
			font-weight: bold;
		}
		</style>
	</section>
	<section class="slide">
		<div>
			<h2>Установка</h2>
			<ol>
				<li>Создать папку teleport там, где удобно. Обычно в <mark>/home/username</mark></li>
				<li>Скачать в нее <a href="http://modx.s3.amazonaws.com/releases/teleport/teleport.phar">teleport.phar</a></li>
			</ol>
			<h3>
				<strong>Каталоги</strong>
			</h3>
			Во время работы teleport создает каталоги:
			<ul>
				<li><mark>profile</mark> - в нем будут размещены профили сайтов</li>
				<li><mark>workspace</mark> - в нем будут размещены собранные пакеты</li>
			</ul>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Как работает?</h2>
			<ol>
				<li>Создание профиля</li>
				<li>Упаковка сайта в пакет</li>
				<li>Перенос пакета в нужное место</li>
				<li>Создание профиля целевого сайта</li>
				<li>Распаковка и установка обновлений</li>
			</ol>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Что умеет?</h2>
			<ul>
				<li class="next">Profile</li>
				<li class="next">Extract</li>
				<li class="next">Inject</li>
				<li class="next">Push</li>
				<li class="next">UserCreate</li>
				<li class="next">Packages/GC</li>
			</ul>

		</div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div></div>
	</section>
	<section class="slide">
		<div>
			<h2></h2>
		</div>
	</section>
	<section class="slide shout">
		<div>
			<h2>Шаблоны</h2>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Шаблоны</h2>
			<ul>
				<li>Запакованы в phar:  <mark>phar://teleport.phar/tpl/*.json.tpl</mark></li>
				<li>Формат - json</li>
				<li>11 шаблонов из коробки: <strong>changeset</strong>, <strong>complete</strong>, <strong>complete_db</strong>, <strong>develop</strong>, <strong>elements</strong>, <strong>packages</strong>, <strong>resource_children</strong>, <strong>resources</strong>, <strong>settings</strong>, <strong>user</strong>, <strong>users</strong></li>
			</ul>
		</div>
	</section>
	<section class="slide">
		<div>
			<strong>changeset.json.tpl</strong>
			<p>Извлекает определенный набор изменений, зафиксированный обратной функцией, заданной в настройках MODX.</p>
			<strong>settings.json.tpl</strong>
			<p>Извлекает все настройки из первого сайта для импорта во второй, обновляет и дополняет существующие.</p>
		</div>
	</section>
	<section class="slide">
		<div>
			<strong>complete.json.tpl</strong>
			<p>Извлекает все объекты ядра, файлы и пользовательские таблицы из первого сайта и заменяет все это во втором.</p>
			<strong>complete_db.json.tpl</strong>
			<p>Извлекает все объекты ядра и пользовательские таблицы, без файлов.</p>
			<strong>packages.json.tpl</strong>
			<p>Извлекает все пакеты из первого сайта и устанавливает во втором.</p>
		</div>
	</section>
	<section class="slide">
		<div>
			<strong><mark>develop.json.tpl</mark></strong>
			<p>Извлекает все объекты ядра, файлы и пользовательские таблицы из первого сайта для импорта во второй, дополняет существующие объекты и таблицы.</p>
			<strong><mark>elements.json.tpl</mark></strong>
			<p>Извлекает все элементы и связанные с ними данные из первого сайта для импорта во второй, обновляет и дополняет существующие.</p>
		</div>
	</section>
	<section class="slide">
		<div>
			<strong>resources.json.tpl</strong>
			<p>Извлекает все ресурсы из первого сайта для импорта во второй, обновляет и дополняет существующие.</p>			
			<strong>resource_children.json.tpl</strong>
			<p>Извлекает все ресурсы, которые являются потомками заданного родительского ресурса.</p>
		</div>
	</section>
	<section class="slide">
		<div>
			<strong>user.json.tpl</strong>
			<p>Излекает одного указанного пользователя и сопутствующие данные из первого сайта для импорта во второй.</p>			
			<strong>users.json.tpl</strong>
			<p>Излекает все пользователей из первого сайта для импорта во второй, обновляет и дополняет существующих.</p>
		</div>
	</section>
	
	<section class="slide cover h shout" id="teleporting">
		<div>
			<h2>Телепортация</h2>
			<img src="pictures/portals.jpg" alt="">
			<style>
			#teleporting h2 {
				position: relative;
				top: 450px;
			}
			</style>
		</div>
	</section>

	<section class="slide">
		<div>
			<h2>Телепортация A в B</h2>
			<table>
				<tr>
					<th>Сайт A</th>
					<th>Сайт B</th>
				</tr>
				<tr>
					<td><strong>Profile</strong>: sitea.profile.json</td>
					<td><strong>Profile</strong>: siteb.profile.json</td>
				</tr>
				<tr>
					<td><strong>Extract</strong>: <br>
						packages <br>
						develop
					</td>
					<td>
						<strong>Inject</strong>: <br>
						packages <br>
						develop
					</td>
				</tr>
				<tr>
					<td colspan="2"><em>Синхронизированы</em></td>
				</tr>
			</table>
		</div>
	</section>
	<section class="slide cover h">
		<div>
			<img src="pictures/packages.png" alt="">
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Проблемы</h2>
			<ul>
				<li>complete и complete_db не подходит для установки через менеджер пакетов</li>
				<li>в конфиге нельзя исключить из упаковки отдельную папку</li>
				<li>не на все действия есть документация</li>
				<li>до сих пор нет документации по <mark>custom tpls</mark></li>
			</ul>
		</div>
	</section>
	<section class="slide">
		<div>
			<h2>Планы</h2>
			<ul>
				<li>Панель управления dev-экземлярами</li>
				<li>Автоматическая сборка пакетов</li>
				<li>Специальный репозиторий для обновлений</li>
				<li>Continuous Delivery через пакеты</li>
			</ul>
		</div>
	</section>	
	<section class="slide">
		<div>
			<h2><img src="pictures/alroniks-experts.svg" alt="Alroniks Experts"></h2>
			<p>Создание сложных интернет-магазинов и сайтов на MODX</p>
			<ul>
				<li><a href="http://alroniks.com">alroniks.com</a> - команда</li>
				<li><a href="http://klimchuk.by">klimchuk.by</a> - личный и контакты</li>
				<li><a href="http://modx.by">modx.by</a> - сообщество</li>
			</ul>
		</div>
	</section>
	<section class="slide cover h"><div>
		<h2>Вопросы?</h2>
		<img src="pictures/ted.jpg" alt="">
	</div></section>
	<p class="badge"><a href="https://github.com/Alroniks/pres-mmm-teleportating">Исходники на Github</a></p>
	<div class="progress"><div></div></div>
	<script src="node_modules/shower-core/shower.min.js"></script>
	<!-- Copyright © 2014 Yours Truly, Famous Inc. -->
	<!-- Slides prepared by Ivan Klimchuk, Alroniks Experts. -->
</body>
</html>